# ğŸ–¥ï¸ Tutorial de ManipulaÃ§Ã£o da MÃ¡quina Target no QEMU

Este guia serve para lembrar os principais comandos e procedimentos para **subir, interagir e desligar** a mÃ¡quina-alvo (`target`) no laboratÃ³rio de Sistemas Operacionais.

---

## ğŸ“‚ Estrutura de Arquivos

- **`start_qemu.sh`** â†’ script que inicia a mÃ¡quina target no QEMU.
- **`output/images/bzImage`** â†’ kernel Linux gerado pelo Buildroot.
- **`output/images/rootfs.ext2`** â†’ sistema de arquivos raiz (*root filesystem*).

---

## ğŸš€ Iniciando a MÃ¡quina Target

1. **Dar permissÃ£o de execuÃ§Ã£o** (apenas uma vez):
   ```bash
   chmod +x start_qemu.sh
   ```

2. **Subir a mÃ¡quina no QEMU**:
   ```bash
   ./start_qemu.sh
   ```

> O script `start_qemu.sh` contÃ©m o comando:
>
> ```bash
> qemu-system-i386 \
>   --kernel output/images/bzImage \
>   --hda output/images/rootfs.ext2 \
>   --nographic \
>   --append "console=ttyS0 root=/dev/sda"
> ```

---

## ğŸ› ï¸ Trabalhando Dentro da MÃ¡quina

ApÃ³s iniciar, vocÃª estarÃ¡ no **prompt do Linux emulado**.

### Exemplos de comandos Ãºteis:
```bash
ls            # Lista arquivos e diretÃ³rios
pwd           # Mostra diretÃ³rio atual
uname -a      # Mostra informaÃ§Ãµes do kernel
df -h         # Mostra uso de disco
```

### Instalando programas (se configurado no Buildroot)
> O sistema nÃ£o tem gerenciador de pacotes como `apt` ou `yum`, pois Ã© mÃ­nimo.  
> Programas extras devem ser incluÃ­dos na configuraÃ§Ã£o do Buildroot antes de recompilar.

---

## ğŸ”Œ Desligando a MÃ¡quina Target

Existem trÃªs formas principais:

### 1. **Desligamento limpo** (recomendado)
No terminal da mÃ¡quina emulada:
```bash
poweroff
```
ou
```bash
halt -p
```

### 2. **SaÃ­da forÃ§ada do QEMU**
Pressione:
```
Ctrl + A  depois  X
```

### 3. **Monitor do QEMU** (se habilitado)
No prompt do QEMU:
```bash
system_powerdown
```

---

## ğŸ’¡ Dicas

* **Evite sair com `Ctrl+C`** no host, pois isso pode corromper o `rootfs.ext2`.
* Para saber se a mÃ¡quina estÃ¡ rodando, verifique os processos:
  ```bash
  ps aux | grep qemu
  ```
* Para desmontar imagens montadas manualmente:
  ```bash
  sudo umount /ponto/de/montagem
  ```

---

## ğŸ“Œ Fluxo Resumido

1. Iniciar: `./start_qemu.sh`  
2. Usar a mÃ¡quina normalmente  
3. Desligar: `poweroff` **ou** `Ctrl+A` depois `X`

---
